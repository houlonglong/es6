<!DOCTYPE>
<html>
<head>
    <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="MobileOptimized" content="320"/>
    <title>学校</title>
    <link href="http://zhouzhijie.sinaapp.com/school/css/index.css" type="text/css" rel="stylesheet">


    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<div id="moveid" class="dragme">
    <ul>
        <li class="li1 on">
            <img src="http://www.scweixiao.com/jx/file/upload/201511/09/09-21-06-11-3.jpg" class="pic1">
        </li>
        <li class="li2"><img src="http://zhouzhijie.sinaapp.com/school/images/2.jpg"></li>
        <li class="li3">
            <img src="http://zhouzhijie.sinaapp.com/school/images/3.jpg" class="pic1">
            <img src="http://zhouzhijie.sinaapp.com/school/images/3-1.jpg" class="pic2">
            <img src="http://zhouzhijie.sinaapp.com/school/images/3-2.png" class="pic3">
            <img src="http://zhouzhijie.sinaapp.com/school/images/3-3.png" class="pic4">
            <img src="http://zhouzhijie.sinaapp.com/school/images/3-4.png" class="pic5">
            <img src="http://zhouzhijie.sinaapp.com/school/images/3-5.png" class="pic6">
        </li>
        <li class="li4">
            <img src="http://zhouzhijie.sinaapp.com/school/images/4.jpg" class="pic1">
            <img src="http://zhouzhijie.sinaapp.com/school/images/4-1.png" class="pic2">
            <img src="http://zhouzhijie.sinaapp.com/school/images/4-2.png" class="pic3">
        </li>
        <li class="li5">
            <img src="http://zhouzhijie.sinaapp.com/school/images/5.jpg" class="pic1">
            <img src="http://zhouzhijie.sinaapp.com/school/images/5-1.png" class="pic2">
            <img src="http://zhouzhijie.sinaapp.com/school/images/5-2.png" class="pic3">
            <img src="http://zhouzhijie.sinaapp.com/school/images/5-3.png" class="pic4">
        </li>
        <li class="li6">
            <div class="pic1"><img src="http://zhouzhijie.sinaapp.com/school/images/6-1.jpg"></div>
            <div class="pic2"><img src="http://zhouzhijie.sinaapp.com/school/images/6-2.jpg"></div>
            <div class="pic3"><img src="http://zhouzhijie.sinaapp.com/school/images/6-3.jpg"></div>
            <img src="http://zhouzhijie.sinaapp.com/school/images/6-4.png" class="pic4">
            <img src="http://zhouzhijie.sinaapp.com/school/images/6-5.png" class="pic5">
        </li>
        <li class="li7">
            <img src="http://zhouzhijie.sinaapp.com/school/images/7.jpg" class="pic1">
            <img src="http://zhouzhijie.sinaapp.com/school/images/7-1.png" class="pic2">
            <img src="http://zhouzhijie.sinaapp.com/school/images/7-2.png" class="pic3">
            <img src="http://zhouzhijie.sinaapp.com/school/images/7-3.png" class="pic4">
        </li>
        <li class="li8">
            <div class="pic1"><img src="http://zhouzhijie.sinaapp.com/school/images/8-1.jpg"></div>
            <div class="pic2"><img src="http://zhouzhijie.sinaapp.com/school/images/8-2.jpg"></div>
            <div class="pic3"><img src="http://zhouzhijie.sinaapp.com/school/images/8-3.jpg"></div>
            <img src="http://zhouzhijie.sinaapp.com/school/images/8-4.png" class="pic4">
            <img src="http://zhouzhijie.sinaapp.com/school/images/8-5.png" class="pic5">
        </li>
        <li class="li9">
            <img src="http://zhouzhijie.sinaapp.com/school/images/9.jpg" class="pic1">
            <img src="http://zhouzhijie.sinaapp.com/school/images/9-1.png" class="pic2">
            <div class="pic3"><img src="http://zhouzhijie.sinaapp.com/school/images/9-2.jpg"></div>
        </li>
        <li class="li10">
            <img src="http://zhouzhijie.sinaapp.com/school/images/10.jpg" class="pic1">
            <img src="http://zhouzhijie.sinaapp.com/school/images/10-1.png" class="pic2">
            <img src="http://zhouzhijie.sinaapp.com/school/images/10-2.png" class="pic3">
            <div class="pic4"><img src="http://zhouzhijie.sinaapp.com/school/images/10-3.jpg"></div>
        </li>
        <li class="li11">
            <img src="http://zhouzhijie.sinaapp.com/school/images/11.jpg" class="pic1">
            <img src="http://zhouzhijie.sinaapp.com/school/images/11-1.png" class="pic2">
            <div class="pic3"><img src="http://zhouzhijie.sinaapp.com/school/images/11-2.jpg"></div>
        </li>
        <li class="li12">
            <div class="pic1"><img src="http://zhouzhijie.sinaapp.com/school/images/12-1.jpg"></div>
            <div class="pic2"><img src="http://zhouzhijie.sinaapp.com/school/images/12-2.jpg"></div>
            <img src="http://zhouzhijie.sinaapp.com/school/images/12-3.png" class="pic3">
            <img src="http://zhouzhijie.sinaapp.com/school/images/12-4.png" class="pic4">
            <img src="http://zhouzhijie.sinaapp.com/school/images/12-5.png" class="pic5">
        </li>
        <li class="li13">
            <div class="pic1"><img src="http://zhouzhijie.sinaapp.com/school/images/13.jpg"></div>
            <div class="pic2"><img src="http://zhouzhijie.sinaapp.com/school/images/13-1.jpg"></div>
            <div class="pic3"><img src="http://zhouzhijie.sinaapp.com/school/images/13-2.jpg"></div>
        </li>
        <li class="li14">
            <div class="pic1"><img src="http://zhouzhijie.sinaapp.com/school/images/14-1.jpg"></div>
            <div class="pic2"><img src="http://zhouzhijie.sinaapp.com/school/images/14-2.jpg"></div>
            <img src="http://zhouzhijie.sinaapp.com/school/images/14-3.png" class="pic3">
            <img src="http://zhouzhijie.sinaapp.com/school/images/14-4.png" class="pic4">
        </li>
        <li class="li15">
            <img src="http://zhouzhijie.sinaapp.com/school/images/15.jpg" class="pic1">
            <img src="http://zhouzhijie.sinaapp.com/school/images/15-1.jpg" class="pic2">
            <img src="http://zhouzhijie.sinaapp.com/school/images/15-2.jpg" class="pic3">
            <img src="http://zhouzhijie.sinaapp.com/school/images/15-3.png" class="pic4">
            <img src="http://zhouzhijie.sinaapp.com/school/images/15-4.png" class="pic5">
        </li>
        <li class="li16">
            <div class="pic1"><img src="http://zhouzhijie.sinaapp.com/school/images/16.png"><img src="http://zhouzhijie.sinaapp.com/school/images/16-1.jpg"></div>
            <div class="pic2"><img src="http://zhouzhijie.sinaapp.com/school/images/16-2.png"><img src="http://zhouzhijie.sinaapp.com/school/images/16-3.jpg"></div>
            <img src="http://zhouzhijie.sinaapp.com/school/images/16-4.png" class="pic3">
            <img src="http://zhouzhijie.sinaapp.com/school/images/16-5.png" class="pic4">
        </li>
        <li class="li17">
            <img src="http://zhouzhijie.sinaapp.com/school/images/17.jpg" class="pic1">
            <img src="http://zhouzhijie.sinaapp.com/school/images/17-1.png" class="pic2">
            <img src="http://zhouzhijie.sinaapp.com/school/images/17-2.png" class="pic3">
        </li>
        <li class="li18">
            <img src="http://zhouzhijie.sinaapp.com/school/images/18.jpg" class="pic1">
            <img src="http://zhouzhijie.sinaapp.com/school/images/18-1.jpg" class="pic2">
            <img src="http://zhouzhijie.sinaapp.com/school/images/18-2.jpg" class="pic3">
            <img src="http://zhouzhijie.sinaapp.com/school/images/18-3.png" class="pic4">
        </li>
        <li class="li19">
            <div class="pic1"><img src="http://zhouzhijie.sinaapp.com/school/images/19.jpg"></div>
            <img src="http://zhouzhijie.sinaapp.com/school/images/19-1.png" class="pic2">
        </li>
        <li class="li20">
            <img src="http://zhouzhijie.sinaapp.com/school/images/20.jpg" class="pic1">
            <img src="http://zhouzhijie.sinaapp.com/school/images/20-1.png" class="pic2">
        </li>
    </ul>
    <div class="page"><span class="span1">1</span>/<span class="span2"></span></div>
    <img src="http://zhouzhijie.sinaapp.com/school/images/tips-push.png" class="tips-push">
    <img src="http://zhouzhijie.sinaapp.com/school/images/music.png" id="musicBtn" class="music-btn on">
    <audio src="http://music01.cloud7.com.cn/F8D7E1D195C7167BDCFAED64B8D514CA.mp3" autoplay="autoplay" loop="loop" id="autoplay"></audio>
</div>
<script type="text/javascript" src="http://zhouzhijie.sinaapp.com/school/js/meta.js"></script>
<script type="text/javascript" src="http://zhouzhijie.sinaapp.com/school/js/zepto.min.js"></script>
<script type="text/javascript">
    var isdrag=false;
    var index = 0;
    var tx,startX,ty,startY,clientW,clientH,len;
    clientW = $('.dragme li').width();
    clientH = $('.dragme li').height();
    len = $('.dragme li').length;
    $('.page .span2').html(len);
    $('.dragme ul').height(clientH*len);
    $('.dragme li').height(clientH);

    $(function(){
        document.getElementById("moveid").addEventListener('touchstart',touchStart);
        document.getElementById("moveid").addEventListener('touchmove',touchMove);
        document.getElementById("moveid").addEventListener('touchend',touchEnd);
        var audio = document.getElementById('autoplay');
        var controller = document.getElementById('musicBtn');
        document.getElementById('musicBtn').addEventListener('touchstart', function() {
            if (audio.paused) {
                audio.play();
                controller.className = 'music-btn on';
            } else {
                audio.pause();
                controller.className = 'music-btn';
            };})
    });
    function touchStart(e){
        isdrag = true;
        e.preventDefault();
        startX = e.targetTouches[0].pageX;
        startY = e.targetTouches[0].pageY;
        ty=$('.dragme ul').offset().top;
    };
    function touchMove(e){
        if (isdrag){
            // e.preventDefault();
            var moveX = e.targetTouches[0].pageX - startX;
            var moveY = ty+e.targetTouches[0].pageY - startY;
            $('.dragme ul').css('top',moveY);
        }
    };
    function touchEnd(e){

        e.preventDefault();
        var endY = e.changedTouches[0].pageY;
        if(startY>endY){
            if(Math.abs(startY-endY)>100){
                index=index<len-1?++index:index;
                if(index>len-2){
                    $('.tips-push').hide();
                }else{
                    $('.tips-push').show();
                };
                $('.page .span1').html(index+1);
                $('.dragme ul').animate({top: -index * clientH + 'px'},500,function(){
                    $('.dragme li').eq(index).addClass('on').siblings().removeClass('on');
                });
            }else{
                $('.dragme ul').animate({top: -index * clientH + 'px'},500,function(){
                    $('.dragme li').eq(index).addClass('on').siblings().removeClass('on');
                });
            }

        }else{
            if(Math.abs(startY-endY)>100){
                index=index>0?--index:index;
                if(index>len-2){
                    $('.tips-push').hide();
                }else{
                    $('.tips-push').show();
                };
                $('.page .span1').html(index+1);
                $('.dragme ul').animate({top: -index * clientH + 'px'},500,function(){
                    $('.dragme li').eq(index).addClass('on').siblings().removeClass('on');
                });
            }else{
                $('.dragme ul').animate({top: -index * clientH + 'px'},500,function(){
                    $('.dragme li').eq(index).addClass('on').siblings().removeClass('on');
                });
            }
        }
    }
</script>
</body>
</html>